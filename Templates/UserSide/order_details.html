{% extends "UserSide/base.html" %}
{% block content %}
    <!--================Order Details Area =================-->
    <section class="order_details section_gap">
        <div class="container">
            <h3 class="title_confirmation">Thank you. Your order has been received.</h3>
            <div class="row order_d_inner">
                <div class="col-lg-4">
                    <div class="details_item">
                        <h4>Order Info</h4>
                        <ul class="list">
                            <li><span>Order number</span> : {{ order.order_id }}</li>
                            <li><span>Date</span> : {{ order.created_at|date:"F j, Y, g:i a" }}</li>
                            <li><span>Total</span> : Rs {{ order.total_price }}</li>
                            <li><span>Payment method</span> : {{ order.payment.method }}</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="details_item">
                        <h4>Billing Address</h4>
                        <ul class="list">
                            <li><span>Name</span> : {{ order.address.name }}</li>
                            <li><span>Street</span> : {{ order.address.street_name }}</li>
                            <li><span>House Name</span> : {{ order.address.house_name }}</li>
                            <li><span>Pin Number</span> : {{ order.address.pin_number }}</li>
                            <li><span>District</span> : {{ order.address.district }}</li>
                            <li><span>State</span> : {{ order.address.state }}</li>
                            <li><span>Phone Number</span> : {{ order.address.phone_number }}</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="details_item">
                        <h4>Shipping Address</h4>
                        <ul class="list">
                            <!-- You may need a separate field in your Order model for shipping address or use the same as billing address -->
                            <li><span>Name</span> : {{ order.address.name }}</li>
                            <li><span>Street</span> : {{ order.address.street_name }}</li>
                            <li><span>House Name</span> : {{ order.address.house_name }}</li>
                            <li><span>Pin Number</span> : {{ order.address.pin_number }}</li>
                            <li><span>District</span> : {{ order.address.district }}</li>
                            <li><span>State</span> : {{ order.address.state }}</li>
                            <li><span>Phone Number</span> : {{ order.address.phone_number }}</li>
                        </ul>
                    </div>
                </div>
            </div>
    
            <div class="order_details_table">
                <h2>Order Details</h2>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Product</th>
                                <th scope="col">Variant</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in order.items.all %}
                            <tr>
                                <td>
                                    <p>{{ item.product_variant.product.product_name }}</p>
                                </td>
                                <td>
                                    <p>{{ item.product_variant.variant_name }}</p>
                                </td>
                                <td>
                                    <h5>x {{ item.quantity }}</h5>
                                </td>
                                <td>
                                    <p>Rs{{ item.price }}</p>
                                </td>
                            </tr>
                            {% endfor %}
                            <tr>
                                <td>
                                    <h4>Subtotal</h4>
                                </td>
                                <td></td>
                                <td></td>
                                <td>
                                    <p>${{ order.total_price }}</p>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h4>Shipping</h4>
                                </td>
                                <td></td>
                                <td></td>
                                <td>
                                    {% comment %} <p>Flat rate: ${{ order.final_price - order.total_price }}</p> {% endcomment %}
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <h4>Total</h4>
                                </td>
                                <td></td>
                                <td></td>
                                <td>
                                    <p>${{ order.final_price }}</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
    <!--================End Order Details Area =================-->
{% endblock %}
