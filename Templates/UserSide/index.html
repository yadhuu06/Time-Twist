</script>

<section id="featured" class="featured-products py-5">
    <div class="container">
        <h2 class="text-center mb-5 featured-heading-brand">Recently Watched</h2>
        <div class="row">
            {% for product in recently_viewed %}
            <div class="col-lg-3 col-md-6 mb-4">
                <a href="{% url 'product_detail_user' product.id %}" class="text-decoration-none product-card">
                    <div class="single-product">
                        <div class="product-img-wrapper">
                            <div class="product-details-overlay">
                                <h5>{{ product.product.product_name }}</h5>
                                <h6 class="text-primary">{{ product.product_brand.brand_name }}</h6>
                                <div class="price">
                                    {% if product.product.offer_price %}
                                        <h4 class="text-success font-weight-bold">₹ {{ product.offer_price }}</h4>
                                    {% endif %}
                                    <h6 class="text-muted">
                                        <span class="text-decoration-line-through">₹ {{ product.product.price }}</span>
                                    </h6>
                                </div>
                            </div>
                            <div class="product-img">
                                <div class="image-wrapper">
                                    {% if product.product.variants.all %}
                                        {% with product.product.variants.all|first as first_variant %}
                                            {% if first_variant.ProductVariantImages.all %}
                                                {% with first_variant.ProductVariantImages.all|first as first_image %}
                                                    <img class="product-image" src="{{ first_image.image.url }}" alt="{{ product.product_name }}">
                                                {% endwith %}
                                            {% else %}
                                                <img class="product-image" src="{% static 'img/placeholder.jpg' %}" alt="{{ product.product_name }}">
                                            {% endif %}
                                        {% endwith %}
                                    {% else %}
                                        <img class="product-image" src="{% static 'img/placeholder.jpg' %}" alt="{{ product.product_name }}">
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
        




        <script>
            document.addEventListener('DOMContentLoaded', function() {
                var swiper = new Swiper('.swiper-container', {
                    slidesPerView: 4,
                    spaceBetween: 30,
                    loop: true,
                    autoplay: {
                        delay: 3000,
                        disableOnInteraction: false,
                    },
                    breakpoints: {
                        // when window width is >= 640px
                        640: {
                          slidesPerView: 2,
                          spaceBetween: 20
                        },
                        // when window width is >= 768px
                        768: {
                          slidesPerView: 3,
                          spaceBetween: 30
                        },
                        // when window width is >= 1024px
                        1024: {
                          slidesPerView: 4,
                          spaceBetween: 30
                        }
                    }
                });
            });
            </script>
            
<style>/* Product Card */
.product-card {
    display: block;
    text-align: center;
    color: #000;
    position: relative; 
}

.single-product {
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    transition: all 0.3s ease-in-out;
    height: 350px; /* Adjust the height for your card */
}

/* Image Wrapper */
.product-img-wrapper {
    position: relative;
    height: 100%;
    overflow: hidden;
}

/* Product Image */
.product-img img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Ensure the image maintains aspect ratio */
    transition: transform 0.3s ease-in-out;
    
}

/* Hover Effect */
.product-card:hover .product-img img {
    transform: scale(1.1); /* Zoom in on hover */
}

/* Product Details Overlay */
.product-details-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0, 0, 0, 0.7);
    color: #fff;
    padding: 15px;
    text-align: left;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
    z-index: 2; 
}

/* Show Overlay on Hover */
.product-card:hover .product-details-overlay {
    opacity: 1;
}

/* Product Name and Price Styling */
.product-details-overlay h5, 
.product-details-overlay h6, 
.product-details-overlay .price {
    margin: 0;
    font-size: 16px;
    color: #fff;
}

/* Grid Layout: 4 Products in a Row */
@media (min-width: 992px) {
    .col-lg-3 {
        flex: 0 0 25%;
        max-width: 25%;
    }
}

/* Adjust the height of the card content to be fixed */
.single-product .image-wrapper {
    height: 220px; /* Set height for image section */
}

.product-details-overlay {
    height: 130px; /* Remaining height for the details */
}
</style>



