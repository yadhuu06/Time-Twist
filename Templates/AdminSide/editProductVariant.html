{% extends "AdminSide/base.html" %}

{% block title %}Edit Product Variant{% endblock %}

{% block content %}

<div class="container mt-5">
    <h3 class="text-center text-gold">Edit Variant: {{ variant.variant_name }}</h3>
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="variant_name">Variant Name</label>
            <input type="text" id="variant_name" name="variant_name" class="form-control" value="{{ variant.variant_name }}">
        </div>

        <div class="form-group">
            <label for="price">Price</label>
            <input type="number" step="0.01" id="price" name="price" class="form-control" value="{{ variant.price }}"min="0">
        </div>

        <div class="form-group">
            <label for="variant_stock">Stock</label>
            <input type="number" id="variant_stock" name="variant_stock" class="form-control" value="{{ variant.variant_stock }}"min="0">
        </div>

        <div class="form-group">
            <label for="colour_code">Color</label>
            <input type="color" id="colour_code" name="colour_code" class="form-control" value="{{ variant.colour_code }}">
        </div>

        <div class="form-group">
            <label for="is_active">Active</label>
            <input type="checkbox" id="is_active" name="is_active" value="true" {% if variant.is_active %}checked{% endif %}>
        </div>

        <div class="form-group">
            <label>Existing Images</label>
            <div>
                {% for image in variant.images.all %}
                    <img src="{{ image.image.url }}" alt="Variant Image" style="width: 100px; height: 100px; margin-right: 10px;">
                {% empty %}
                    <p>No images available.</p>
                {% endfor %}
            </div>
        </div>

        <div class="form-group">
            <label for="images">Upload New Images</label>
            <input type="file" id="images" name="images" multiple>
        </div>

        <button type="submit" class="btn btn-primary">Save Changes</button>
    </form>
</div><script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        {% if messages %}
            const messages = [
                {% for message in messages %}
                    {
                        level: "{{ message.tags }}",
                        text: "{{ message }}"
                    },
                {% endfor %}
            ];
            messages.forEach(message => {
                Swal.fire({
                    toast: true,
                    position: 'top-right',
                    icon: message.level === 'success' ? 'success' : 'error',
                    title: message.text,
                    showConfirmButton: false,
                    timer: 3000
                });
            });
        {% endif %}
    });
</script>

{% endblock %}
